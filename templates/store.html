{% extends "base.html" %}

{% block title %}Store - {{ config.app_name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-3">
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-coins"></i> Your Balance</h5>
            </div>
            <div class="card-body text-center">
                <h3 class="text-primary">{{ user.balance }} <i class="fas fa-coins"></i></h3>
            </div>
        </div>
    </div>

    <div class="col-lg-9">
        <!-- Store Navigation -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-primary w-100" onclick="showStore('likes')">
                            <i class="fas fa-heart"></i>FreeFire Like Store
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-success w-100" onclick="showStore('kprp')">
                            <i class="fas fa-gamepad"></i> KPRP Rewards
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-info w-100" onclick="showStore('vouchers')">
                            <i class="fas fa-gift"></i> Vouchers
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-warning w-100" onclick="showStore('gaming')">
                            <i class="fas fa-trophy"></i> Gaming
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Like Store -->
        <div id="likes-store" class="store-section">
            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-heart text-danger"></i> Like Store</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>1 Day Likes</h6>
                                    <p>50-100 likes per day</p>
                                    <p><strong>20 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('ff_likes_1day', 20, '1 Day Likes', 'likes')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>7 Days Auto Likes</h6>
                                    <p>50-100 likes per day</p>
                                    <p><strong>100 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('ff_likes_7day', 100, '7 Days Likes', 'likes')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>30 Days Auto Likes</h6>
                                    <p>50-100 likes per day</p>
                                    <p><strong>400 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('ff_likes_30day', 400, '30 Days Auto Likes', 'likes')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- KPRP Store -->
        <div id="kprp-store" class="store-section" style="display: none;">
            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-money-bill text-success"></i> KPRP In-Game Cash</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>10 Lakh Cash</h6>
                                    <p><strong>300 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('kprp_cash_10l', 300, '10 Lakh KPRP Cash', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>30 Lakh Cash</h6>
                                    <p><strong>800 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('kprp_cash_30l', 800, '30 Lakh KPRP Cash', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>50 Lakh Cash</h6>
                                    <p><strong>1,200 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('kprp_cash_50l', 1200, '50 Lakh KPRP Cash', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>1 Cr Cash</h6>
                                    <p><strong>2,200 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('kprp_cash_1cr', 2200, '1 Cr KPRP Cash', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-star text-warning"></i> VIP Plans</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Base Plan</h6>
                                    <p><strong>3,300 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('kprp_vip_base', 3300, 'KPRP Base VIP Plan', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Bronze Plan</h6>
                                    <p><strong>4,400 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('kprp_vip_bronze', 4400, 'KPRP Bronze VIP Plan', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Silver Plan</h6>
                                    <p><strong>5,500 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('kprp_vip_silver', 5500, 'KPRP Silver VIP Plan', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Gold Plan</h6>
                                    <p><strong>7,600 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('kprp_vip_gold', 7600, 'KPRP Gold VIP Plan', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Diamond Plan</h6>
                                    <p><strong>11,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('kprp_vip_diamond', 11000, 'KPRP Diamond VIP Plan', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Legendary Plan</h6>
                                    <p><strong>17,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('kprp_vip_legendary', 17000, 'KPRP Legendary VIP Plan', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-car text-primary"></i> VIP Cars</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Normal Car</h6>
                                    <p><strong>800 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_normal', 800, 'KPRP Normal Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Normal 2nd Class</h6>
                                    <p><strong>1,200 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_normal_2nd', 1200, 'KPRP Normal 2nd Class Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Normal 3rd Class</h6>
                                    <p><strong>1,600 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_normal_3rd', 1600, 'KPRP Normal 3rd Class Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Rare 2nd Class</h6>
                                    <p><strong>2,400 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_rare_2nd', 2400, 'KPRP Rare 2nd Class Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Rare 1st Class</h6>
                                    <p><strong>2,800 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_rare_1st', 2800, 'KPRP Rare 1st Class Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Restricted Car</h6>
                                    <p><strong>4,000 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_restricted', 4000, 'KPRP Restricted Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>Exotic Car</h6>
                                    <p><strong>5,000 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('kprp_car_exotic', 5000, 'KPRP Exotic Car', 'kprp')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4><i class="fas fa-ticket-alt text-info"></i> KPRP Vouchers</h4>
                    <p class="mb-0 text-white"><i class="fas fa-info-circle"></i> Use to buy any item of equal value</p>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-2 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹10 Voucher</h6>
                                    <p><strong>200 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('kprp_voucher_10', 200, 'â‚¹10 KPRP Voucher', 'kprp_voucher')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹50 Voucher</h6>
                                    <p><strong>1,000 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('kprp_voucher_50', 1000, 'â‚¹50 KPRP Voucher', 'kprp_voucher')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹100 Voucher</h6>
                                    <p><strong>2,000 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('kprp_voucher_100', 2000, 'â‚¹100 KPRP Voucher', 'kprp_voucher')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹200 Voucher</h6>
                                    <p><strong>4,000 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('kprp_voucher_200', 4000, 'â‚¹200 KPRP Voucher', 'kprp_voucher')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹500 Voucher</h6>
                                    <p><strong>10,000 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('kprp_voucher_500', 10000, 'â‚¹500 KPRP Voucher', 'kprp_voucher')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹1000 Voucher</h6>
                                    <p><strong>20,000 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('kprp_voucher_1000', 20000, 'â‚¹1000 KPRP Voucher', 'kprp_voucher')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vouchers Store -->
        <div id="vouchers-store" class="store-section" style="display: none;">
            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-money-check text-info"></i> UPI Vouchers</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹10 UPI Voucher</h6>
                                    <p><strong>260 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('upi_voucher_10', 260, 'â‚¹10 UPI Voucher', 'upi')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹20 UPI Voucher</h6>
                                    <p><strong>500 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('upi_voucher_20', 500, 'â‚¹20 UPI Voucher', 'upi')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹50 UPI Voucher</h6>
                                    <p><strong>1,050 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('upi_voucher_50', 1050, 'â‚¹50 UPI Voucher', 'upi')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹100 UPI Voucher</h6>
                                    <p><strong>2,100 Coins</strong></p>
                                    <button class="btn btn-info" onclick="showPurchaseModal('upi_voucher_100', 2100, 'â‚¹100 UPI Voucher', 'upi')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fab fa-amazon text-warning"></i> Amazon Voucher Store</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹10 Amazon Voucher</h6>
                                    <p><strong>200 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_10', 200, 'â‚¹10 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹30 Amazon Voucher</h6>
                                    <p><strong>600 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_30', 600, 'â‚¹30 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹50 Amazon Voucher</h6>
                                    <p><strong>1,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_50', 1000, 'â‚¹50 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹100 Amazon Voucher</h6>
                                    <p><strong>2,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_100', 2000, 'â‚¹100 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹200 Amazon Voucher</h6>
                                    <p><strong>4,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_200', 4000, 'â‚¹200 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹500 Amazon Voucher</h6>
                                    <p><strong>10,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_500', 10000, 'â‚¹500 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹1,000 Amazon Voucher</h6>
                                    <p><strong>20,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_1000', 20000, 'â‚¹1,000 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹2,000 Amazon Voucher</h6>
                                    <p><strong>40,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_2000', 40000, 'â‚¹2,000 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹5,000 Amazon Voucher</h6>
                                    <p><strong>100,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('amazon_voucher_5000', 100000, 'â‚¹5,000 Amazon Voucher', 'amazon')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4><i class="fab fa-google-play text-success"></i> Google Play Redeem Code Store</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹10 Google Play Code</h6>
                                    <p><strong>200 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_10', 200, 'â‚¹10 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹30 Google Play Code</h6>
                                    <p><strong>600 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_30', 600, 'â‚¹30 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹50 Google Play Code</h6>
                                    <p><strong>1,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_50', 1000, 'â‚¹50 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹100 Google Play Code</h6>
                                    <p><strong>2,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_100', 2000, 'â‚¹100 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹200 Google Play Code</h6>
                                    <p><strong>4,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_200', 4000, 'â‚¹200 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹500 Google Play Code</h6>
                                    <p><strong>10,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_500', 10000, 'â‚¹500 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>â‚¹1,000 Google Play Code</h6>
                                    <p><strong>20,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('google_play_1000', 20000, 'â‚¹1,000 Google Play Code', 'google_play')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gaming Store -->
        <div id="gaming-store" class="store-section" style="display: none;">
            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-gem text-warning"></i> Free Fire Diamond Store</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>100 Diamonds</h6>
                                    <p><strong>1,600 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('ff_diamond_100', 1600, '100 Free Fire Diamonds', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>310 Diamonds</h6>
                                    <p><strong>4,800 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('ff_diamond_310', 4800, '310 Free Fire Diamonds', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>520 Diamonds</h6>
                                    <p><strong>8,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('ff_diamond_520', 8000, '520 Free Fire Diamonds', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>1060 Diamonds</h6>
                                    <p><strong>16,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('ff_diamond_1060', 16000, '1060 Free Fire Diamonds', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>2180 Diamonds</h6>
                                    <p><strong>32,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('ff_diamond_2180', 32000, '2180 Free Fire Diamonds', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>5600 Diamonds</h6>
                                    <p><strong>80,000 Coins</strong></p>
                                    <button class="btn btn-warning" onclick="showPurchaseModal('ff_diamond_5600', 80000, '5600 Free Fire Diamonds', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-gamepad text-primary"></i> PUBG UC Store</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>60 UC</h6>
                                    <p><strong>1,500 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('pubg_uc_60', 1500, '60 PUBG UC', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>325 UC</h6>
                                    <p><strong>7,600 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('pubg_uc_325', 7600, '325 PUBG UC', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>660 UC</h6>
                                    <p><strong>15,000 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('pubg_uc_660', 15000, '660 PUBG UC', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>1800 UC</h6>
                                    <p><strong>38,000 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('pubg_uc_1800', 38000, '1800 PUBG UC', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>3850 UC</h6>
                                    <p><strong>78,000 Coins</strong></p>
                                    <button class="btn btn-primary" onclick="showPurchaseModal('pubg_uc_3850', 78000, '3850 PUBG UC', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h4><i class="fas fa-futbol text-success"></i> PES / eFootball Coins Store</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>250 PES Coins</h6>
                                    <p><strong>15,980 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('pes_coins_250', 15980, '250 PES Coins', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>1,050 PES Coins</h6>
                                    <p><strong>63,980 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('pes_coins_1050', 63980, '1,050 PES Coins', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>2,150 PES Coins</h6>
                                    <p><strong>128,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('pes_coins_2150', 128000, '2,150 PES Coins', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>3,300 PES Coins</h6>
                                    <p><strong>198,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('pes_coins_3300', 198000, '3,300 PES Coins', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="store-item card h-100">
                                <div class="card-body text-center">
                                    <h6>6,900 PES Coins</h6>
                                    <p><strong>398,000 Coins</strong></p>
                                    <button class="btn btn-success" onclick="showPurchaseModal('pes_coins_6900', 398000, '6,900 PES Coins', 'gaming')">Buy Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Purchase Modal -->
<div class="modal fade" id="purchaseModal" tabindex="-1" aria-labelledby="purchaseModalLabel" aria-hidden="true" data-bs-backdrop="false" data-bs-keyboard="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="purchaseModalLabel">Purchase Item</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center mb-3">
                    <h4 id="modalItemName"></h4>
                    <p><strong>Cost: <span id="modalCoins"></span> Coins</strong></p>
                    <p>Your balance: {{ user.balance }} Coins</p>
                </div>
                <form id="purchaseForm">
                    <input type="hidden" id="modalItemType" name="item_type">
                    <input type="hidden" id="modalCoinsCost" name="coins">

                    <div id="likesFields" style="display: none;">
                        <div class="mb-3">
                            <label for="likesUid" class="form-label">Social Media UID <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="likesUid" name="likesUid" placeholder="Enter your social media UID">
                            <div class="form-text">Your social media profile UID</div>
                        </div>
                    </div>

                    <div id="gamingFields" style="display: none;">
                        <div class="mb-3">
                            <label for="gamingUid" class="form-label">Game UID <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="gamingUid" name="gamingUid" placeholder="Enter your game UID">
                            <div class="form-text">Your in-game User ID</div>
                        </div>
                    </div>

                    <div id="kprpFields" style="display: none;">
                        <div class="mb-3">
                            <label for="kprpName" class="form-label">KPRP In-Game Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="kprpName" name="kprpName" placeholder="Enter your KPRP in-game name">
                            <div class="form-text">Your exact in-game username in KPRP server</div>
                        </div>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> <strong>Important:</strong> After your request is confirmed via email, you need to create a support ticket. 
                            <br><a href="https://later.com" target="_blank" class="text-decoration-none">ðŸ“º Watch Tutorial</a>
                        </div>
                    </div>

                    <div id="upiFields" style="display: none;">
                        <div class="mb-3">
                            <label for="upiId" class="form-label">UPI ID <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="upiId" name="upiId" placeholder="yourname@paytm / yourname@gpay">
                            <div class="form-text">Your UPI ID for payment transfer</div>
                        </div>
                    </div>

                    <div id="voucherFields" style="display: none;">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Your voucher code will be automatically generated and sent to your registered email (<strong>{{ current_user.email }}</strong>) immediately!
                        </div>
                    </div>

                    <div id="amazonFields" style="display: none;">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> Amazon voucher code will be sent to your registered email after admin approval.
                        </div>
                    </div>

                    <div id="googlePlayFields" style="display: none;">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> Google Play redeem code will be sent to your registered email after admin approval.
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="completePurchase()">
                    <i class="fas fa-shopping-cart"></i> Complete Purchase
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true" data-bs-backdrop="false" data-bs-keyboard="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="successModalLabel">
                    <i class="fas fa-check-circle"></i> Order Successful!
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="mb-3">
                    <i class="fas fa-check-circle text-success" style="font-size: 3rem;"></i>
                </div>
                <h4>Thank you for your purchase!</h4>
                <p class="mb-3" id="successMessage">Your order has been placed successfully.</p>
                <div class="alert alert-info">
                    <strong>Order ID:</strong> <span id="orderIdDisplay"></span><br>
                    <span id="statusMessage"></span>
                </div>
                <p id="emailMessage">You will receive an email confirmation shortly.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="location.reload()">
                    <i class="fas fa-shopping-cart"></i> Continue Shopping
                </button>
                <a href="{{ url_for('purchase_history') }}" class="btn btn-outline-primary">
                    <i class="fas fa-history"></i> View Orders
                </a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
let currentItemType = '';
let currentCoins = 0;
let currentFieldType = '';

function showStore(storeType) {
    document.querySelectorAll('.store-section').forEach(section => {
        section.style.display = 'none';
    });
    document.getElementById(storeType + '-store').style.display = 'block';
}

function showPurchaseModal(itemType, coins, itemName, fieldType) {
    if ({{ user.balance }} < coins) {
        alert('Insufficient balance! You need ' + coins + ' coins for this item.');
        return;
    }

    currentItemType = itemType;
    currentCoins = coins;
    currentFieldType = fieldType;

    document.getElementById('modalItemName').textContent = itemName;
    document.getElementById('modalCoins').textContent = coins;
    document.getElementById('modalItemType').value = itemType;
    document.getElementById('modalCoinsCost').value = coins;

    document.querySelectorAll('[id$="Fields"]').forEach(field => {
        field.style.display = 'none';
    });

    document.getElementById('likesUid').value = '';
    document.getElementById('gamingUid').value = '';
    document.getElementById('kprpName').value = '';
    document.getElementById('upiId').value = '';

    if (fieldType === 'likes') {
        document.getElementById('likesFields').style.display = 'block';
    } else if (fieldType === 'gaming') {
        document.getElementById('gamingFields').style.display = 'block';
    } else if (fieldType === 'kprp') {
        document.getElementById('kprpFields').style.display = 'block';
    } else if (fieldType === 'upi') {
        document.getElementById('upiFields').style.display = 'block';
    } else if (fieldType === 'kprp_voucher') {
        document.getElementById('voucherFields').style.display = 'block';
    } else if (fieldType === 'amazon') {
        document.getElementById('amazonFields').style.display = 'block';
    } else if (fieldType === 'google_play') {
        document.getElementById('googlePlayFields').style.display = 'block';
    }

    const modalElement = document.getElementById('purchaseModal');
    const modal = new bootstrap.Modal(modalElement, {
        backdrop: false,
        keyboard: true,
        focus: true
    });

    modalElement.addEventListener('shown.bs.modal', function () {
        setTimeout(() => {
            const firstInput = modalElement.querySelector('input[type="text"]');
            if (firstInput) {
                firstInput.focus();
            }
        }, 100);
    }, {once: true});

    modal.show();
}

function completePurchase() {
    let additionalInfo = '';
    const formData = new FormData();

    formData.append('item_type', currentItemType);
    formData.append('coins', currentCoins);

    if (currentFieldType === 'likes') {
        const uid = document.getElementById('likesUid').value;
        if (!uid.trim()) {
            alert('Please enter your social media UID');
            return;
        }
        additionalInfo = `UID: ${uid}`;
        formData.append('additional_info', additionalInfo);
    } else if (currentFieldType === 'gaming') {
        const uid = document.getElementById('gamingUid').value;
        if (!uid.trim()) {
            alert('Please enter your game UID');
            return;
        }
        additionalInfo = `UID: ${uid}`;
        formData.append('additional_info', additionalInfo);
    } else if (currentFieldType === 'kprp') {
        const name = document.getElementById('kprpName').value;
        if (!name.trim()) {
            alert('Please enter your KPRP in-game name');
            return;
        }
        additionalInfo = `KPRP Name: ${name}`;
        formData.append('additional_info', additionalInfo);
    } else if (currentFieldType === 'upi') {
        const upiId = document.getElementById('upiId').value;
        if (!upiId.trim()) {
            alert('Please enter your UPI ID');
            return;
        }
        additionalInfo = `UPI ID: ${upiId}`;
        formData.append('additional_info', additionalInfo);
    } else if (currentFieldType === 'kprp_voucher') {
        additionalInfo = 'Auto-generated voucher';
        formData.append('additional_info', additionalInfo);
    } else if (currentFieldType === 'amazon' || currentFieldType === 'google_play') {
        additionalInfo = 'Pending admin approval';
        formData.append('additional_info', additionalInfo);
    }

    fetch('/purchase', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        const purchaseModal = bootstrap.Modal.getInstance(document.getElementById('purchaseModal'));
        purchaseModal.hide();

        if (data.success) {
            document.getElementById('orderIdDisplay').textContent = data.order_id;

            if (currentFieldType === 'kprp_voucher') {
                document.getElementById('successMessage').textContent = 'Your KPRP voucher has been generated!';
                document.getElementById('statusMessage').innerHTML = '<strong>Status:</strong> Completed âœ…<br><strong>Voucher Code:</strong> ' + data.voucher_code;
                document.getElementById('emailMessage').textContent = 'Check your email for your 16-character voucher code!';
            } else {
                document.getElementById('successMessage').textContent = 'Your order has been placed successfully.';
                document.getElementById('statusMessage').innerHTML = '<strong>Processing Time:</strong> 1-24 hours<br><strong>Status:</strong> Pending';
                document.getElementById('emailMessage').textContent = 'You will receive an email confirmation shortly. You can track your order in the Purchase History section.';
            }

            const successModal = new bootstrap.Modal(document.getElementById('successModal'));
            successModal.show();
        } else {
            alert('Error: ' + data.error);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('An error occurred while processing your order');
    });
}

document.addEventListener('DOMContentLoaded', function() {
    showStore('likes');
});
</script>
{% endblock %}